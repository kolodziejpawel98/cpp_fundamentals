Plan szczegÃ³Å‚owy na DzieÅ„ 1

Temat: RAII + Rule of 0/3/5
â± Czas: ~60 min
Krok 1 â€” Teoria (15 min)

    Przeczytaj o RAII:

        RAII = Resource Acquisition Is Initialization.

        Zasoby (np. plik, pamiÄ™Ä‡, muteks) sÄ… przejmowane w konstruktorze, zwalniane w destruktorze.

        DziÄ™ki temu nie trzeba pamiÄ™taÄ‡ o close(), free(), delete â€” robi to destruktor.

    Przypomnij Rule of 0/3/5:

        0: Klasa korzysta z gotowych obiektÃ³w RAII â†’ kompilator generuje wszystko.

        3: Potrzebny destruktor, konstruktor kopiujÄ…cy i operator przypisania (np. przy surowym wskaÅºniku).

        5: Dodatkowo konstruktor przenoszÄ…cy i operator przypisania przenoszÄ…cego (C++11+).

ğŸ“– Å¹rÃ³dÅ‚o do przeczytania:

    Stroustrup, The C++ Programming Language â€” rozdziaÅ‚ o RAII.

    Lub krÃ³cej: cppreference â†’ RAII.

Krok 2 â€” Ä†wiczenie praktyczne (35 min)

    Napisz klasÄ™ FileWrapper:

        Konstruktor: otwiera plik w trybie odczytu.

        Destruktor: zamyka plik.

        Dodaj prostÄ… metodÄ™ readLine().

    Testuj kopiowanie:

        SprÃ³buj skompilowaÄ‡ kod kopiujÄ…cy FileWrapper.

        Zobacz, co wygeneruje kompilator i czy to dziaÅ‚a poprawnie.

    Dodaj obsÅ‚ugÄ™ przenoszenia:

        Konstruktor przenoszÄ…cy â€” przejmij uchwyt pliku.

        Operator przypisania przenoszÄ…cego.

    ZrÃ³b krÃ³tki test:

        UtwÃ³rz FileWrapper f1("plik.txt").

        PrzekaÅ¼ go do funkcji przez wartoÅ›Ä‡ â€” zobacz, czy przenoszenie dziaÅ‚a.

Krok 3 â€” Refleksja (10 min)

    Wypisz w punktach:

        Co by siÄ™ staÅ‚o, gdyby destruktor nie zamykaÅ‚ pliku?

        Jakie masz zalety przenoszenia w tym przykÅ‚adzie?

        Czy moÅ¼na byÅ‚oby tÄ™ klasÄ™ napisaÄ‡ w myÅ›l Rule of 0? (np. przez uÅ¼ycie std::ifstream jako pola).

JeÅ¼eli chcesz, to mogÄ™ Ci teraz rozpisaÄ‡ DzieÅ„ 2 w tym samym, super-szczegÃ³Å‚owym formacie, Å¼ebyÅ› miaÅ‚ caÅ‚y tydzieÅ„ gotowy bez zgadywania, co robiÄ‡.
Chcesz?
